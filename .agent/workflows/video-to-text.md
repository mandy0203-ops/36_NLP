---
description: å°‡å¤§å‹å½±ç‰‡æª”è½‰æ›ç‚ºæ–‡å­—(å­—å¹•+ç´”æ–‡å­—)
---

# å½±ç‰‡è½‰æ–‡å­—å·¥ä½œæµç¨‹

> [!IMPORTANT]
> **âš¡ é—œéµæé†’:ä¸€å®šè¦å…ˆå£“ç¸®å½±ç‰‡!**
> 
> ç›´æ¥è½‰éŒ„å¤§å‹å½±ç‰‡æœƒ:
> - âŒ æµªè²»å¤§é‡æ™‚é–“(å¯èƒ½æ•¸å°æ™‚)
> - âŒ æ¶ˆè€—å¤§é‡ API é¡åº¦
> - âŒ å¯èƒ½å› æª”æ¡ˆéå¤§è€Œå¤±æ•—
> 
> å…ˆå£“ç¸®å¯ä»¥:
> - âœ… ç¯€çœ 99% ä»¥ä¸Šçš„è™•ç†æ™‚é–“
> - âœ… å¤§å¹…é™ä½ API æˆæœ¬
> - âœ… æé«˜è½‰éŒ„æˆåŠŸç‡

æ­¤å·¥ä½œæµç¨‹å°‡å¤§å‹å½±ç‰‡æª”æ¡ˆè½‰æ›ç‚ºæ–‡å­—,åŒ…å«**å£“ç¸®ã€è½‰éŒ„å’Œæ ¼å¼åŒ–**ä¸‰å€‹ä¸»è¦æ­¥é©Ÿã€‚

## é©ç”¨æƒ…å¢ƒ

- éœ€è¦å°‡å½±ç‰‡å…§å®¹è½‰æ›ç‚ºæ–‡å­—ç¨¿
- å½±ç‰‡æª”æ¡ˆéå¤§,éœ€è¦å…ˆå£“ç¸®
- éœ€è¦ç”¢ç”Ÿå­—å¹•æª”(.srt)å’Œç´”æ–‡å­—æª”(.txt)
- éœ€è¦ç¹é«”ä¸­æ–‡è½‰éŒ„

## å‰ç½®éœ€æ±‚

- âœ… ffmpeg å·²å®‰è£
- âœ… Python è™›æ“¬ç’°å¢ƒå·²å»ºç«‹ (.venv)
- âœ… å·²å®‰è£å¿…è¦å¥—ä»¶: `pyyaml`, `elevenlabs`, `groq`, `pydub`
- âœ… ElevenLabs API Key å·²è¨­å®šåœ¨ `01-system/configs/apis/API-Keys.md`

## å·¥ä½œæµç¨‹æ­¥é©Ÿ

### æ­¥é©Ÿ 1: å°‡å½±ç‰‡è½‰æ›ç‚ºå£“ç¸®éŸ³æª” âš¡ **å¿…åš!ä¸å¯è·³é!**

> [!WARNING]
> **çµ•å°ä¸è¦è·³éæ­¤æ­¥é©Ÿ!**
> 
> å³ä½¿å½±ç‰‡çœ‹èµ·ä¾†ä¸å¤§,ä¹Ÿè¦å…ˆå£“ç¸®ã€‚é€™æ˜¯ç¯€çœæ™‚é–“å’Œæˆæœ¬çš„é—œéµæ­¥é©Ÿã€‚

ä½¿ç”¨ ffmpeg å¾å½±ç‰‡ä¸­æå–éŸ³è¨Šä¸¦å£“ç¸®è‡³æœ€å°:

```bash
ffmpeg -i "/path/to/video.MP4" -vn -ac 1 -ar 16000 -b:a 32k -f mp3 "/path/to/output_compressed.mp3"
```

**åƒæ•¸èªªæ˜:**
- `-vn`: ä¸è™•ç†å½±åƒ,åªæå–éŸ³è¨Š
- `-ac 1`: è½‰æ›ç‚ºå–®è²é“(mono)
- `-ar 16000`: å–æ¨£ç‡è¨­ç‚º 16kHz
- `-b:a 32k`: éŸ³è¨Šä½å…ƒç‡è¨­ç‚º 32kbps
- `-f mp3`: è¼¸å‡ºæ ¼å¼ç‚º MP3

**é æœŸçµæœ:**
- å£“ç¸®ç‡å¯é” 99%+
- éŸ³è³ªè¶³å¤ ç”¨æ–¼èªéŸ³è½‰éŒ„
- å¤§å¹…ç¸®çŸ­è½‰éŒ„æ™‚é–“å’Œ API æˆæœ¬

### æ­¥é©Ÿ 2: åŸ·è¡ŒèªéŸ³è½‰éŒ„

ä½¿ç”¨ audio_transcribe å·¥å…·é€²è¡Œè½‰éŒ„:

// turbo
```bash
.venv/bin/python 01-system/tools/stt/audio_transcribe/transcribe.py --input "/path/to/compressed.mp3" --engine elevenlabs
```

**åƒæ•¸èªªæ˜:**
- `--input`: å£“ç¸®å¾Œçš„éŸ³æª”è·¯å¾‘
- `--engine elevenlabs`: ä½¿ç”¨ ElevenLabs Scribe v1 å¼•æ“(æ¨è–¦ç”¨æ–¼ç¹é«”ä¸­æ–‡)
- `--engine groq`: æˆ–ä½¿ç”¨ Groq Whisper(é€Ÿåº¦è¼ƒå¿«,ä½†å¯èƒ½æœ‰é€Ÿç‡é™åˆ¶)
- `--output-name`: (å¯é¸)è‡ªè¨‚è¼¸å‡ºè³‡æ–™å¤¾åç¨±

**è½‰éŒ„é…ç½®:**
- èªè¨€: ç¹é«”ä¸­æ–‡ (zh)
- èªªè©±è€…è­˜åˆ¥: å•Ÿç”¨
- æ™‚é–“æˆ³ç²’åº¦: è©ç´š

### æ­¥é©Ÿ 3: æª¢æŸ¥è¼¸å‡ºæª”æ¡ˆ

è½‰éŒ„å®Œæˆå¾Œ,æª¢æŸ¥è¼¸å‡ºè³‡æ–™å¤¾:

// turbo
```bash
ls -lh 03-outputs/audio_transcribe/[æª”å_æ™‚é–“æˆ³]/
```

**è¼¸å‡ºæª”æ¡ˆèªªæ˜:**

| æª”æ¡ˆ | èªªæ˜ |
|------|------|
| `åŸæª”å.srt` | åŸå§‹å­—å¹•æª”(å«æ™‚é–“æˆ³) |
| `åŸæª”å.txt` | åŸå§‹æ–‡å­—æª”(ç´”æ–‡å­—) |
| `åŸæª”å_formatted.srt` | â­ æ ¼å¼åŒ–å­—å¹•æª”(æ¨è–¦) |
| `åŸæª”å_formatted.txt` | â­ æ ¼å¼åŒ–æ–‡å­—æª”(æ¨è–¦) |
| `_metadata.yaml` | è½‰éŒ„å…ƒæ•¸æ“š |

**æ ¼å¼åŒ–åŠŸèƒ½:**
- âœ… å£æ°´è©æ¸…æ´—
- âœ… 18 å­—æ–·å¥(é©åˆçŸ­å½±ç‰‡å­—å¹•)
- âœ… é¢¨æ ¼çµ±ä¸€
- âœ… è‡ªè¨‚è©å…¸æ‡‰ç”¨

### æ­¥é©Ÿ 4: æŸ¥çœ‹è½‰éŒ„çµæœ

// turbo
```bash
head -50 03-outputs/audio_transcribe/[æª”å_æ™‚é–“æˆ³]/[æª”å]_formatted.txt
```

## å®Œæ•´ç¯„ä¾‹

> [!CAUTION]
> **åŸ·è¡Œé †åºå¾ˆé‡è¦!å¿…é ˆæŒ‰ç…§ä»¥ä¸‹é †åºåŸ·è¡Œ:**
> 1ï¸âƒ£ å…ˆå£“ç¸® â†’ 2ï¸âƒ£ å†è½‰éŒ„ â†’ 3ï¸âƒ£ æœ€å¾Œæª¢æŸ¥

å‡è¨­è¦è½‰éŒ„ `/Users/xiangyun/Desktop/video.MP4`:

```bash
# 1. å£“ç¸®å½±ç‰‡ç‚ºéŸ³æª”
ffmpeg -i "/Users/xiangyun/Desktop/video.MP4" -vn -ac 1 -ar 16000 -b:a 32k -f mp3 "/Users/xiangyun/Desktop/video_compressed.mp3"

# 2. åŸ·è¡Œè½‰éŒ„
.venv/bin/python 01-system/tools/stt/audio_transcribe/transcribe.py --input "/Users/xiangyun/Desktop/video_compressed.mp3" --engine elevenlabs

# 3. æª¢æŸ¥è¼¸å‡º
ls -lh 03-outputs/audio_transcribe/video_compressed_*/
```

## é€²éšè¨­å®š

### è‡ªè¨‚è©å…¸

ç·¨è¼¯ `01-system/tools/stt/audio_transcribe/custom_dict.yaml` æ–°å¢æ…£ç”¨è©å½™:

```yaml
replacements:
  - wrong: ["äººç”Ÿè§£æ§‹", "äººç”Ÿè§£æ‰£"]
    correct: "äººç”Ÿè§£æ‰£æ–¹ç¨‹å¼"
  
  - wrong: ["GPT", "G P T"]
    correct: "ChatGPT"
```

### æ ¼å¼åŒ–è¦å‰‡

ç·¨è¼¯ `01-system/tools/stt/audio_transcribe/formatting_rules.yaml` èª¿æ•´:
- å£æ°´è©æ¸…å–®
- å­—å¹•å­—æ•¸é™åˆ¶
- å°ˆæœ‰ç¸®å¯«è¦å‰‡

## æ³¨æ„äº‹é …

âš ï¸ **ElevenLabs å…è²»ç‰ˆé™åˆ¶:**
- æ¯æœˆ 150 åˆ†é˜
- ä¸å¯å•†ç”¨

âš ï¸ **Groq å…è²»ç‰ˆé™åˆ¶:**
- æ¯å°æ™‚ 120 åˆ†é˜
- å¯èƒ½é‡åˆ°é€Ÿç‡é™åˆ¶(429 éŒ¯èª¤)
- å·¥å…·æœƒè‡ªå‹•é‡è©¦

ğŸ’¡ **æœ€ä½³å¯¦è¸:**
- å¤§æª”æ¡ˆä¸€å®šè¦å…ˆå£“ç¸®å†è½‰éŒ„
- ä½¿ç”¨ ElevenLabs å¯ç²å¾—æ›´å¥½çš„ç¹é«”ä¸­æ–‡è¾¨è­˜
- æ ¼å¼åŒ–ç‰ˆæœ¬æ›´é©åˆé–±è®€å’Œä½¿ç”¨

## æ•…éšœæ’é™¤

### å•é¡Œ: ffmpeg æœªå®‰è£

```bash
brew install ffmpeg
```

### å•é¡Œ: Python å¥—ä»¶ç¼ºå¤±

```bash
.venv/bin/pip install pyyaml elevenlabs groq pydub
```

### å•é¡Œ: API Key æœªè¨­å®š

æª¢æŸ¥ `01-system/configs/apis/API-Keys.md` æ˜¯å¦åŒ…å«:
```
ELEVENLABS_API_KEY=sk-...
GROQ_API_KEY=gsk_...
```

### å•é¡Œ: é€Ÿç‡é™åˆ¶(429 éŒ¯èª¤)

- Groq: å·¥å…·æœƒè‡ªå‹•é‡è©¦,è«‹è€å¿ƒç­‰å¾…
- ElevenLabs: æª¢æŸ¥æ˜¯å¦è¶…éæ¯æœˆé¡åº¦

## æ•ˆèƒ½åƒè€ƒ

**å¯¦éš›æ¡ˆä¾‹:**
- åŸå§‹å½±ç‰‡: 44GB (29åˆ†31ç§’, 4K HEVC)
- å£“ç¸®éŸ³æª”: 6.9MB (å£“ç¸®ç‡ 99.98%)
- å£“ç¸®æ™‚é–“: 2.6 ç§’
- è½‰éŒ„æ™‚é–“: ~2 åˆ†é˜
- ç¸½è™•ç†æ™‚é–“: ~5 åˆ†é˜

## ç›¸é—œæ–‡ä»¶

- å·¥å…·æ–‡ä»¶: `01-system/docs/user/tools/audio_transcribe.md`
- å·¥å…·è¨»å†Š: `01-system/configs/tools/registry.yaml`
- API è¨­å®š: `01-system/configs/apis/API-Keys.md`
